
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Constructor injection designed with OOP in mind.">
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.7">
    
    
      
        <title>Usage - dependencies</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.ca7ac06f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.f1a3b89f.min.css">
        
          
          
          <meta name="theme-color" content="#7e56c2">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="deep-purple">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#usage" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="dependencies" class="md-header__button md-logo" aria-label="dependencies" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.14 7.5A2.86 2.86 0 0 1 22 10.36v3.78A2.86 2.86 0 0 1 19.14 17H12c0 .39.32.96.71.96H17v1.68a2.86 2.86 0 0 1-2.86 2.86H9.86A2.86 2.86 0 0 1 7 19.64v-3.75a2.85 2.85 0 0 1 2.86-2.85h5.25a2.85 2.85 0 0 0 2.85-2.86V7.5h1.18m-4.28 11.79c-.4 0-.72.3-.72.89 0 .59.32.71.72.71a.71.71 0 0 0 .71-.71c0-.59-.32-.89-.71-.89m-10-1.79A2.86 2.86 0 0 1 2 14.64v-3.78A2.86 2.86 0 0 1 4.86 8H12c0-.39-.32-.96-.71-.96H7V5.36A2.86 2.86 0 0 1 9.86 2.5h4.28A2.86 2.86 0 0 1 17 5.36v3.75a2.85 2.85 0 0 1-2.86 2.85H8.89a2.85 2.85 0 0 0-2.85 2.86v2.68H4.86M9.14 5.71c.4 0 .72-.3.72-.89 0-.59-.32-.71-.72-.71-.39 0-.71.12-.71.71s.32.89.71.89z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            dependencies
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Usage
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/proofit404/dependencies" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    proofit404/dependencies
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        Home
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../why/" class="md-tabs__link md-tabs__link--active">
        Usage
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../attrs/" class="md-tabs__link">
        Guides
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="dependencies" class="md-nav__button md-logo" aria-label="dependencies" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.14 7.5A2.86 2.86 0 0 1 22 10.36v3.78A2.86 2.86 0 0 1 19.14 17H12c0 .39.32.96.71.96H17v1.68a2.86 2.86 0 0 1-2.86 2.86H9.86A2.86 2.86 0 0 1 7 19.64v-3.75a2.85 2.85 0 0 1 2.86-2.85h5.25a2.85 2.85 0 0 0 2.85-2.86V7.5h1.18m-4.28 11.79c-.4 0-.72.3-.72.89 0 .59.32.71.72.71a.71.71 0 0 0 .71-.71c0-.59-.32-.89-.71-.89m-10-1.79A2.86 2.86 0 0 1 2 14.64v-3.78A2.86 2.86 0 0 1 4.86 8H12c0-.39-.32-.96-.71-.96H7V5.36A2.86 2.86 0 0 1 9.86 2.5h4.28A2.86 2.86 0 0 1 17 5.36v3.75a2.85 2.85 0 0 1-2.86 2.85H8.89a2.85 2.85 0 0 0-2.85 2.86v2.68H4.86M9.14 5.71c.4 0 .72-.3.72-.89 0-.59-.32-.71-.72-.71-.39 0-.71.12-.71.71s.32.89.71.89z"/></svg>

    </a>
    dependencies
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/proofit404/dependencies" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    proofit404/dependencies
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      <label class="md-nav__link" for="__nav_1">
        Home
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Home" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Home
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        Changelog
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      <label class="md-nav__link" for="__nav_2">
        Usage
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Usage" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Usage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../why/" class="md-nav__link">
        Why
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Usage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Usage
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#preparations" class="md-nav__link">
    Preparations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#injection-rules" class="md-nav__link">
    Injection rules
  </a>
  
    <nav class="md-nav" aria-label="Injection rules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#calculation-rules" class="md-nav__link">
    Calculation rules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nested-injectors" class="md-nav__link">
    Nested Injectors
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scope-extension" class="md-nav__link">
    Scope extension
  </a>
  
    <nav class="md-nav" aria-label="Scope extension">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inheritance" class="md-nav__link">
    Inheritance
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#call" class="md-nav__link">
    Call
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hasattr-alternative" class="md-nav__link">
    hasattr alternative
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../this/" class="md-nav__link">
        This
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../package/" class="md-nav__link">
        Package
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../value/" class="md-nav__link">
        Value
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Guides
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Guides" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../attrs/" class="md-nav__link">
        Attrs
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../descriptors/" class="md-nav__link">
        Descriptors
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../enum/" class="md-nav__link">
        Enums
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#preparations" class="md-nav__link">
    Preparations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#injection-rules" class="md-nav__link">
    Injection rules
  </a>
  
    <nav class="md-nav" aria-label="Injection rules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#calculation-rules" class="md-nav__link">
    Calculation rules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nested-injectors" class="md-nav__link">
    Nested Injectors
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scope-extension" class="md-nav__link">
    Scope extension
  </a>
  
    <nav class="md-nav" aria-label="Scope extension">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inheritance" class="md-nav__link">
    Inheritance
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#call" class="md-nav__link">
    Call
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hasattr-alternative" class="md-nav__link">
    hasattr alternative
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">&para;</a></h1>
<h2 id="preparations">Preparations<a class="headerlink" href="#preparations" title="Permanent link">&para;</a></h2>
<p>Before we start to inject dependencies, let's define code which needs these
dependencies. Also, let's add some behavior to your robot.</p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Robot</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">servo</span><span class="p">,</span> <span class="n">controller</span><span class="p">,</span> <span class="n">settings</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">servo</span> <span class="o">=</span> <span class="n">servo</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">controller</span> <span class="o">=</span> <span class="n">controller</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">settings</span> <span class="o">=</span> <span class="n">settings</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="gp">... </span>            <span class="n">events</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">accept_events</span><span class="p">()</span>
<span class="gp">... </span>            <span class="k">if</span> <span class="ow">not</span> <span class="n">events</span><span class="p">:</span>
<span class="gp">... </span>                <span class="k">break</span>
<span class="gp">... </span>            <span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">events</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">accept_events</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="c1"># We can inject methods.</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">controller</span><span class="p">()</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">events</span><span class="p">):</span>
<span class="gp">... </span>        <span class="c1"># We can inject dictionaries.</span>
<span class="gp">... </span>        <span class="n">max_point</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s2">&quot;max_point&quot;</span><span class="p">]</span>
<span class="gp">... </span>        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">events</span><span class="p">:</span>
<span class="gp">... </span>            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">max_point</span><span class="p">:</span>
<span class="gp">... </span>                <span class="c1"># We can inject objects.</span>
<span class="gp">... </span>                <span class="bp">self</span><span class="o">.</span><span class="n">servo</span><span class="o">.</span><span class="n">reverse</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">)</span>
<span class="gp">... </span>            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span> <span class="o">&gt;</span> <span class="n">max_point</span><span class="p">:</span>
<span class="gp">... </span>                <span class="bp">self</span><span class="o">.</span><span class="n">servo</span><span class="o">.</span><span class="n">reverse</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">)</span>
</code></pre></div>
<p>We use constructor-based dependency injection here: we define necessary
arguments and store them explicitly, for the sake of readability. This will help
us to understand the execution path of your system. Attributes sourced from
nowhere in your code aren't fun. Believe me.</p>
<p>Now, it's time to make this work in the real world.</p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">MechanicalMotor</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coordinate</span><span class="p">):</span>
<span class="gp">... </span>        <span class="c1"># Hardware work goes here.</span>
<span class="gp">... </span>        <span class="k">pass</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">read_sensor</span><span class="p">():</span>
<span class="gp">... </span>    <span class="c1"># Another hardware work goes here.</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">[]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">production</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;max_point&#39;</span><span class="p">:</span> <span class="mf">0.01</span><span class="p">}</span>
</code></pre></div>
<p>We are close to scream "It's alive!" and, if we're lucky enough, run out of the
building.</p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dependencies</span> <span class="kn">import</span> <span class="n">Injector</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Container</span><span class="p">(</span><span class="n">Injector</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">robot</span> <span class="o">=</span> <span class="n">Robot</span>
<span class="gp">... </span>    <span class="n">servo</span> <span class="o">=</span> <span class="n">MechanicalMotor</span>
<span class="gp">... </span>    <span class="n">controller</span> <span class="o">=</span> <span class="n">read_sensor</span>
<span class="gp">... </span>    <span class="n">settings</span> <span class="o">=</span> <span class="n">production</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">robot</span> <span class="o">=</span> <span class="n">Container</span><span class="o">.</span><span class="n">robot</span>  <span class="c1"># Robots&#39; constructor called here.</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">robot</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>
<p>Congratulations! We've built our robot with dependency injection.</p>
<h2 id="injection-rules">Injection rules<a class="headerlink" href="#injection-rules" title="Permanent link">&para;</a></h2>
<p><code>Container</code> above is a dependency scope, and dependencies are defined as its
attributes. When you access one of those attributes, the following happens:</p>
<ul>
<li>If attribute value is a <code>class</code>, it will be instantiated. To make that
  possible, the library will inspect its constructor's argument list and search
  current dependency scope for dependencies with the same name.</li>
<li>If attribute value is a <code>class</code> but attribute name ends with <code>_class</code> - then
  it will be returned as is. (For example, <code>Container.foo_class</code> will return the
  class stored in it, not its instance).</li>
<li>Anything else is returned as is.</li>
<li>If, during dependency search, we encounter another <code>class</code> - it will be
  instantiated along these rules, as well. The process is recursive.</li>
</ul>
<p>Here is a demonstration of rules above.</p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Foo</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">one</span><span class="p">,</span> <span class="n">two</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">one</span> <span class="o">=</span> <span class="n">one</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">two</span> <span class="o">=</span> <span class="n">two</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Bar</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">pass</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Baz</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>

<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dependencies</span> <span class="kn">import</span> <span class="n">Injector</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Scope</span><span class="p">(</span><span class="n">Injector</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">foo</span> <span class="o">=</span> <span class="n">Foo</span>
<span class="gp">... </span>    <span class="n">one</span> <span class="o">=</span> <span class="n">Bar</span>
<span class="gp">... </span>    <span class="n">two</span> <span class="o">=</span> <span class="n">Baz</span>
<span class="gp">... </span>    <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Scope</span><span class="o">.</span><span class="n">foo</span>  <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">&lt;__main__.Foo object at 0x...&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Scope</span><span class="o">.</span><span class="n">foo</span><span class="o">.</span><span class="n">one</span>  <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">&lt;__main__.Bar object at 0x...&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Scope</span><span class="o">.</span><span class="n">foo</span><span class="o">.</span><span class="n">two</span>  <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">&lt;__main__.Baz object at 0x...&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Scope</span><span class="o">.</span><span class="n">foo</span><span class="o">.</span><span class="n">two</span><span class="o">.</span><span class="n">x</span>
<span class="go">1</span>
</code></pre></div>
<p>Let's roll down what is happening here:</p>
<ul>
<li><code>Foo</code> class requires an argument named <code>two</code>;</li>
<li>In dependency scope, that argument resolves to <code>Baz</code> class;</li>
<li>Which is a class - oh, we need to instantiate it as well;</li>
<li>But its constructor requires an argument named <code>x</code>;</li>
<li>Which resolves to <code>1</code> in the dependency scope, so we do not need to go any
  further.</li>
</ul>
<p>Having found that out, we effectively construct, execute, and return
<code>Foo(two=Baz(x=1))</code>.</p>
<h3 id="calculation-rules">Calculation rules<a class="headerlink" href="#calculation-rules" title="Permanent link">&para;</a></h3>
<p>Each dependency evaluates exactly once during injection process. If during
dependency injection different classes have constructor argument with the same
name, the corresponding dependency will be instantiated once and these two
constructors will receive the same object. But this object only lives during one
injection process; another attribute access means a new object.</p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dependencies</span> <span class="kn">import</span> <span class="n">Injector</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Container</span><span class="p">(</span><span class="n">Injector</span><span class="p">):</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">class</span> <span class="nc">Foo</span><span class="p">:</span>
<span class="gp">...</span>
<span class="gp">... </span>        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bar</span><span class="p">,</span> <span class="n">baz</span><span class="p">):</span>
<span class="gp">... </span>            <span class="bp">self</span><span class="o">.</span><span class="n">bar</span> <span class="o">=</span> <span class="n">bar</span>
<span class="gp">... </span>            <span class="bp">self</span><span class="o">.</span><span class="n">baz</span> <span class="o">=</span> <span class="n">baz</span>
<span class="gp">...</span>
<span class="gp">... </span>        <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bar</span><span class="o">.</span><span class="n">x</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="n">baz</span><span class="o">.</span><span class="n">x</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">class</span> <span class="nc">Bar</span><span class="p">:</span>
<span class="gp">...</span>
<span class="gp">... </span>        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">class</span> <span class="nc">Baz</span><span class="p">:</span>
<span class="gp">...</span>
<span class="gp">... </span>        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">class</span> <span class="nc">X</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="c1"># Names.</span>
<span class="gp">... </span>    <span class="n">foo</span><span class="p">,</span> <span class="n">bar</span><span class="p">,</span> <span class="n">baz</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">,</span> <span class="n">Bar</span><span class="p">,</span> <span class="n">Baz</span><span class="p">,</span> <span class="n">X</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Container</span><span class="o">.</span><span class="n">foo</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>
<span class="go">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Container</span><span class="o">.</span><span class="n">bar</span><span class="o">.</span><span class="n">x</span> <span class="ow">is</span> <span class="n">Container</span><span class="o">.</span><span class="n">bar</span><span class="o">.</span><span class="n">x</span>
<span class="go">False</span>
</code></pre></div>
<h3 id="nested-injectors">Nested <code>Injectors</code><a class="headerlink" href="#nested-injectors" title="Permanent link">&para;</a></h3>
<p>It is possible to inject <code>Injector</code> itself. <code>Injector</code> subclasses are provided
as is, and calculate their attributes on first use.</p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dependencies</span> <span class="kn">import</span> <span class="n">Injector</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Container</span><span class="p">(</span><span class="n">Injector</span><span class="p">):</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">class</span> <span class="nc">Foo</span><span class="p">:</span>
<span class="gp">...</span>
<span class="gp">... </span>        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bar</span><span class="p">):</span>
<span class="gp">... </span>            <span class="bp">self</span><span class="o">.</span><span class="n">bar</span> <span class="o">=</span> <span class="n">bar</span>
<span class="gp">...</span>
<span class="gp">... </span>        <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bar</span><span class="o">.</span><span class="n">baz</span><span class="p">()</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">class</span> <span class="nc">Bar</span><span class="p">(</span><span class="n">Injector</span><span class="p">):</span>
<span class="gp">...</span>
<span class="gp">... </span>        <span class="k">class</span> <span class="nc">Baz</span><span class="p">:</span>
<span class="gp">...</span>
<span class="gp">... </span>            <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
<span class="gp">... </span>                <span class="bp">self</span><span class="o">.</span><span class="n">func</span> <span class="o">=</span> <span class="n">func</span>
<span class="gp">...</span>
<span class="gp">... </span>            <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">()</span>
<span class="gp">...</span>
<span class="gp">... </span>        <span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
<span class="gp">... </span>            <span class="k">return</span> <span class="mi">1</span>
<span class="gp">...</span>
<span class="gp">... </span>        <span class="c1"># Names.</span>
<span class="gp">... </span>        <span class="n">baz</span> <span class="o">=</span> <span class="n">Baz</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="c1"># Names.</span>
<span class="gp">... </span>    <span class="n">foo</span><span class="p">,</span> <span class="n">bar</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">,</span> <span class="n">Bar</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Container</span><span class="o">.</span><span class="n">foo</span><span class="p">()</span>
<span class="go">1</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Container</span><span class="o">.</span><span class="n">foo</span><span class="o">.</span><span class="n">bar</span>
<span class="go">&lt;class &#39;_dependencies.injector.Bar&#39;&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Container</span><span class="o">.</span><span class="n">foo</span><span class="o">.</span><span class="n">bar</span><span class="o">.</span><span class="n">baz</span>  <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">&lt;__main__.Container.Bar.Baz object at 0x...&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Container</span><span class="o">.</span><span class="n">foo</span><span class="o">.</span><span class="n">bar</span><span class="o">.</span><span class="n">baz</span><span class="o">.</span><span class="n">func</span>  <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">&lt;function Container.Bar.func at 0x...&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Container</span><span class="o">.</span><span class="n">foo</span><span class="o">.</span><span class="n">bar</span><span class="o">.</span><span class="n">baz</span><span class="o">.</span><span class="n">func</span><span class="p">()</span>
<span class="go">1</span>
</code></pre></div>
<h2 id="scope-extension">Scope extension<a class="headerlink" href="#scope-extension" title="Permanent link">&para;</a></h2>
<p>You can define a dependency scope partially and then extend it; only in
injection moment, meaning at the time of attribute access, you are required to
have the complete scope.</p>
<p>It is possible to extend dependency scopes in two ways:</p>
<ul>
<li>inheritance</li>
<li>call</li>
</ul>
<h3 id="inheritance">Inheritance<a class="headerlink" href="#inheritance" title="Permanent link">&para;</a></h3>
<p>You can add additional dependencies or redefine existing ones in a scope
subclass:</p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Foo</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">pass</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Scope</span><span class="p">(</span><span class="n">Injector</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">foo</span> <span class="o">=</span> <span class="n">Foo</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">ChildScope</span><span class="p">(</span><span class="n">Scope</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">bar</span> <span class="o">=</span> <span class="n">Bar</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">ChildScope</span><span class="o">.</span><span class="n">foo</span>  <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">&lt;__main__.Foo object at 0x...&gt;</span>
</code></pre></div>
<p>Multiple inheritance is allowed as well.</p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Scope1</span><span class="p">(</span><span class="n">Injector</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">foo</span> <span class="o">=</span> <span class="n">Foo</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Scope2</span><span class="p">(</span><span class="n">Injector</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">bar</span> <span class="o">=</span> <span class="n">Bar</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">ChildScope</span><span class="p">(</span><span class="n">Scope1</span><span class="p">,</span> <span class="n">Scope2</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">ChildScope</span><span class="o">.</span><span class="n">foo</span>  <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">&lt;__main__.Foo object at 0x...&gt;</span>
</code></pre></div>
<p>We also provide <code>and</code> notation for in-place <code>Injector</code> composition. Example
below is full equivalent to the previous one, but without intermediate class
needed.</p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Scope1</span><span class="p">(</span><span class="n">Injector</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">foo</span> <span class="o">=</span> <span class="n">Foo</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Scope2</span><span class="p">(</span><span class="n">Injector</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">bar</span> <span class="o">=</span> <span class="n">Bar</span>

<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">Scope1</span> <span class="o">&amp;</span> <span class="n">Scope2</span><span class="p">)</span><span class="o">.</span><span class="n">foo</span>  <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">&lt;__main__.Foo object at 0x...&gt;</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Extension scope should not be empty.  You can't inherit from
<code>Injector</code> just to have <code>pass</code> keyword as the body of the class.</p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Container</span><span class="p">(</span><span class="n">Injector</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">_dependencies.exceptions.DependencyError</span>: <span class="n">Extension scope can not be empty</span>
</code></pre></div>
</div>
<h3 id="call">Call<a class="headerlink" href="#call" title="Permanent link">&para;</a></h3>
<p>You can temporary redefine a dependency for only one case. This is extremely
useful for tests. Inject an assertion instead of one or more dependencies, and
you will be able to test your system in all possible cases. It is, for example,
possible to simulate database integrity error on concurrent access.</p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Scope</span><span class="p">(</span><span class="n">Injector</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">foo</span> <span class="o">=</span> <span class="n">Foo</span>
<span class="gp">... </span>    <span class="n">bar</span> <span class="o">=</span> <span class="n">Bar</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Scope</span><span class="p">(</span><span class="n">bar</span><span class="o">=</span><span class="n">Baz</span><span class="p">)</span><span class="o">.</span><span class="n">foo</span>  <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">&lt;__main__.Foo object at 0x...&gt;</span>
</code></pre></div>
<p>It is possible to build dependency scopes directly from dictionaries using call.</p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">settings</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;host&#39;</span><span class="p">:</span> <span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="s1">&#39;port&#39;</span><span class="p">:</span> <span class="mi">1234</span><span class="p">}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Scope</span> <span class="o">=</span> <span class="n">Injector</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="n">Foo</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="n">Bar</span><span class="p">,</span> <span class="o">**</span><span class="n">settings</span><span class="p">)</span>
</code></pre></div>
<h2 id="hasattr-alternative"><code>hasattr</code> alternative<a class="headerlink" href="#hasattr-alternative" title="Permanent link">&para;</a></h2>
<p><code>hasattr</code> works by attribute access, so it triggers dependency injection. If
this is unnecessary side effect, <code>dependencies</code> provides alternative way.</p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Container</span><span class="p">(</span><span class="n">Injector</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">foo</span> <span class="o">=</span> <span class="mi">1</span>

<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;foo&#39;</span> <span class="ow">in</span> <span class="n">Container</span>
<span class="go">True</span>
</code></pre></div>
<p align="center">&mdash; ‚≠ê &mdash;</p>
<p align="center"><i>The <code>dependencies</code> library is part of the SOLID python family.</i></p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../why/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Why" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Why
            </div>
          </div>
        </a>
      
      
        
        <a href="../this/" class="md-footer__link md-footer__link--next" aria-label="Next: This" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              This
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.b0710199.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.76f349be.min.js"></script>
      
        <script src="../javascripts/extra.js"></script>
      
    
  </body>
</html>