
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Constructor injection designed with OOP in mind.">
      
      
      
        <link rel="canonical" href="https://proofit404.github.io/dependencies/settings/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.7">
    
    
      
        <title>Settings - dependencies</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
          
          
          <meta name="theme-color" content="#7e56c2">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="deep-purple">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#reading-configuration" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="dependencies" class="md-header__button md-logo" aria-label="dependencies" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.14 7.5A2.86 2.86 0 0 1 22 10.36v3.78A2.86 2.86 0 0 1 19.14 17H12c0 .39.32.96.71.96H17v1.68a2.86 2.86 0 0 1-2.86 2.86H9.86A2.86 2.86 0 0 1 7 19.64v-3.75a2.85 2.85 0 0 1 2.86-2.85h5.25a2.85 2.85 0 0 0 2.85-2.86V7.5h1.18m-4.28 11.79c-.4 0-.72.3-.72.89 0 .59.32.71.72.71a.71.71 0 0 0 .71-.71c0-.59-.32-.89-.71-.89m-10-1.79A2.86 2.86 0 0 1 2 14.64v-3.78A2.86 2.86 0 0 1 4.86 8H12c0-.39-.32-.96-.71-.96H7V5.36A2.86 2.86 0 0 1 9.86 2.5h4.28A2.86 2.86 0 0 1 17 5.36v3.75a2.85 2.85 0 0 1-2.86 2.85H8.89a2.85 2.85 0 0 0-2.85 2.86v2.68H4.86M9.14 5.71c.4 0 .72-.3.72-.89 0-.59-.32-.71-.72-.71-.39 0-.71.12-.71.71s.32.89.71.89Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            dependencies
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Settings
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/proofit404/dependencies" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    proofit404/dependencies
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        Home
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../why/" class="md-tabs__link">
        Usage
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../attrs/" class="md-tabs__link md-tabs__link--active">
        Guides
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="dependencies" class="md-nav__button md-logo" aria-label="dependencies" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.14 7.5A2.86 2.86 0 0 1 22 10.36v3.78A2.86 2.86 0 0 1 19.14 17H12c0 .39.32.96.71.96H17v1.68a2.86 2.86 0 0 1-2.86 2.86H9.86A2.86 2.86 0 0 1 7 19.64v-3.75a2.85 2.85 0 0 1 2.86-2.85h5.25a2.85 2.85 0 0 0 2.85-2.86V7.5h1.18m-4.28 11.79c-.4 0-.72.3-.72.89 0 .59.32.71.72.71a.71.71 0 0 0 .71-.71c0-.59-.32-.89-.71-.89m-10-1.79A2.86 2.86 0 0 1 2 14.64v-3.78A2.86 2.86 0 0 1 4.86 8H12c0-.39-.32-.96-.71-.96H7V5.36A2.86 2.86 0 0 1 9.86 2.5h4.28A2.86 2.86 0 0 1 17 5.36v3.75a2.85 2.85 0 0 1-2.86 2.85H8.89a2.85 2.85 0 0 0-2.85 2.86v2.68H4.86M9.14 5.71c.4 0 .72-.3.72-.89 0-.59-.32-.71-.72-.71-.39 0-.71.12-.71.71s.32.89.71.89Z"/></svg>

    </a>
    dependencies
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/proofit404/dependencies" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    proofit404/dependencies
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          Home
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Home" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Home
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        Changelog
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Usage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Usage" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Usage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../why/" class="md-nav__link">
        Why
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../usage/" class="md-nav__link">
        Usage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../classes/" class="md-nav__link">
        Classes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../this/" class="md-nav__link">
        This
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../nested/" class="md-nav__link">
        Nested Injectors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../package/" class="md-nav__link">
        Package
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../value/" class="md-nav__link">
        Value
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../shield/" class="md-nav__link">
        Shield
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sticky/" class="md-nav__link">
        Sticky Scopes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../setup_teardown/" class="md-nav__link">
        Setup and Teardown
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../direct_resolve/" class="md-nav__link">
        Direct Resolve
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Guides" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../attrs/" class="md-nav__link">
        Attrs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../descriptors/" class="md-nav__link">
        Descriptors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../enum/" class="md-nav__link">
        Enums
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../type_hints/" class="md-nav__link">
        Type Hints
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mixins/" class="md-nav__link">
        Mixins
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../design/" class="md-nav__link">
        Design
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Settings
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Settings
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#principles" class="md-nav__link">
    Principles
  </a>
  
    <nav class="md-nav" aria-label="Principles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hard-coded-configuration" class="md-nav__link">
    Hard-coded configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reading-configuration-file" class="md-nav__link">
    Reading configuration file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reading-environment-variables" class="md-nav__link">
    Reading environment variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reading-settings-from-network" class="md-nav__link">
    Reading settings from network
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#principles" class="md-nav__link">
    Principles
  </a>
  
    <nav class="md-nav" aria-label="Principles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hard-coded-configuration" class="md-nav__link">
    Hard-coded configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reading-configuration-file" class="md-nav__link">
    Reading configuration file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reading-environment-variables" class="md-nav__link">
    Reading environment variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reading-settings-from-network" class="md-nav__link">
    Reading settings from network
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="reading-configuration">Reading configuration<a class="headerlink" href="#reading-configuration" title="Permanent link">&para;</a></h1>
<p>An application with proper architecture has plugable configuration which is easy
to tune according to changing environment, like servers, DNS names, and
orchestration strategies.</p>
<p>Most of the time you would use a framework like Django, Flask, or FastAPI as
foundation for your infrastructure (implementation details) layer. These
frameworks tend to provide configuration instruments like Django settings file,
Flask application factory, and so on.</p>
<p>These defaults could serve you needs so far, but in more complex applications
which includes a lot of moving parts such approach could hit design limations
pretty soon.</p>
<p><code>dependencies</code> library draw the border between your infrastructure layer and
your business domain. The way you configure your application is implementation
detail itself.</p>
<h2 id="principles">Principles<a class="headerlink" href="#principles" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="#hard-coded-configuration">Hard-coded configuration</a></li>
<li><a href="#reading-configuration-file">Reading configuration file</a></li>
<li><a href="#reading-environment-variables">Reading environment variables</a></li>
<li><a href="#reading-settings-from-network">Reading settings from network</a></li>
</ul>
<h3 id="hard-coded-configuration">Hard-coded configuration<a class="headerlink" href="#hard-coded-configuration" title="Permanent link">&para;</a></h3>
<p>Most easiest and straightforward way to define project settings is to hardcode
it inside application <code>Injector</code> subclass. Such approach would work nice during
proof of concept development stage. Early in the development days you would
probably more focused on business idea itself rather environment it would run
inside.</p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dependencies</span> <span class="kn">import</span> <span class="n">Injector</span><span class="p">,</span> <span class="n">this</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">application</span> <span class="kn">import</span> <span class="n">App</span><span class="p">,</span> <span class="n">PostgreSQL</span><span class="p">,</span> <span class="n">Redis</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Container1</span><span class="p">(</span><span class="n">Injector</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">app</span> <span class="o">=</span> <span class="n">App</span>
<span class="gp">... </span>    <span class="n">database</span> <span class="o">=</span> <span class="n">this</span><span class="o">.</span><span class="n">Database</span><span class="o">.</span><span class="n">connection</span>
<span class="gp">... </span>    <span class="n">cache</span> <span class="o">=</span> <span class="n">this</span><span class="o">.</span><span class="n">Cache</span><span class="o">.</span><span class="n">connection</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">class</span> <span class="nc">Database</span><span class="p">(</span><span class="n">Injector</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">connection</span> <span class="o">=</span> <span class="n">PostgreSQL</span>
<span class="gp">... </span>        <span class="n">host</span> <span class="o">=</span> <span class="p">(</span><span class="n">this</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s2">&quot;postgresql&quot;</span><span class="p">][</span><span class="s2">&quot;host&quot;</span><span class="p">]</span>
<span class="gp">... </span>        <span class="n">port</span> <span class="o">=</span> <span class="p">(</span><span class="n">this</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s2">&quot;postgresql&quot;</span><span class="p">][</span><span class="s2">&quot;port&quot;</span><span class="p">]</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">class</span> <span class="nc">Cache</span><span class="p">(</span><span class="n">Injector</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">connection</span> <span class="o">=</span> <span class="n">Redis</span>
<span class="gp">... </span>        <span class="n">host</span> <span class="o">=</span> <span class="p">(</span><span class="n">this</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s2">&quot;redis&quot;</span><span class="p">][</span><span class="s2">&quot;host&quot;</span><span class="p">]</span>
<span class="gp">... </span>        <span class="n">port</span> <span class="o">=</span> <span class="p">(</span><span class="n">this</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s2">&quot;redis&quot;</span><span class="p">][</span><span class="s2">&quot;port&quot;</span><span class="p">]</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="n">settings</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>        <span class="s2">&quot;postgresql&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="mi">5432</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">},</span>
<span class="gp">... </span>        <span class="s2">&quot;redis&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="mi">6379</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">},</span>
<span class="gp">... </span>    <span class="p">}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Container1</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="go">Connecting to localhost:5432</span>
<span class="go">Connecting to localhost:6379</span>
</code></pre></div>
<h3 id="reading-configuration-file">Reading configuration file<a class="headerlink" href="#reading-configuration-file" title="Permanent link">&para;</a></h3>
<p>For simple deployments configuration file would be an obvious choice. Let say
you have this file somewhere in your <code>/etc</code> folder on your server.</p>
<div class="highlight"><pre><span></span><code>---
postgresql:
  host: 127.0.0.3
  port: 5432
redis:
  host: 127.0.0.3
  port: 6379
</code></pre></div>
<p>We could create a singleton configuration instance. File would be read only
once.</p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">lru_cache</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dependencies</span> <span class="kn">import</span> <span class="n">Injector</span><span class="p">,</span> <span class="n">this</span><span class="p">,</span> <span class="n">value</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">yaml</span> <span class="kn">import</span> <span class="n">safe_load</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">application</span> <span class="kn">import</span> <span class="n">App</span><span class="p">,</span> <span class="n">PostgreSQL</span><span class="p">,</span> <span class="n">Redis</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Container2</span><span class="p">(</span><span class="n">Injector</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">app</span> <span class="o">=</span> <span class="n">App</span>
<span class="gp">... </span>    <span class="n">database</span> <span class="o">=</span> <span class="n">this</span><span class="o">.</span><span class="n">Database</span><span class="o">.</span><span class="n">connection</span>
<span class="gp">... </span>    <span class="n">cache</span> <span class="o">=</span> <span class="n">this</span><span class="o">.</span><span class="n">Cache</span><span class="o">.</span><span class="n">connection</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">class</span> <span class="nc">Database</span><span class="p">(</span><span class="n">Injector</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">connection</span> <span class="o">=</span> <span class="n">PostgreSQL</span>
<span class="gp">... </span>        <span class="n">host</span> <span class="o">=</span> <span class="p">(</span><span class="n">this</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s2">&quot;postgresql&quot;</span><span class="p">][</span><span class="s2">&quot;host&quot;</span><span class="p">]</span>
<span class="gp">... </span>        <span class="n">port</span> <span class="o">=</span> <span class="p">(</span><span class="n">this</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s2">&quot;postgresql&quot;</span><span class="p">][</span><span class="s2">&quot;port&quot;</span><span class="p">]</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">class</span> <span class="nc">Cache</span><span class="p">(</span><span class="n">Injector</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">connection</span> <span class="o">=</span> <span class="n">Redis</span>
<span class="gp">... </span>        <span class="n">host</span> <span class="o">=</span> <span class="p">(</span><span class="n">this</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s2">&quot;redis&quot;</span><span class="p">][</span><span class="s2">&quot;host&quot;</span><span class="p">]</span>
<span class="gp">... </span>        <span class="n">port</span> <span class="o">=</span> <span class="p">(</span><span class="n">this</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s2">&quot;redis&quot;</span><span class="p">][</span><span class="s2">&quot;port&quot;</span><span class="p">]</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="nd">@value</span>
<span class="gp">... </span>    <span class="nd">@lru_cache</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">settings</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">config</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">... </span>            <span class="k">return</span> <span class="n">safe_load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="n">config</span> <span class="o">=</span> <span class="s2">&quot;docs/config.yml&quot;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Container2</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="go">Connecting to 127.0.0.3:5432</span>
<span class="go">Connecting to 127.0.0.3:6379</span>
</code></pre></div>
<p>As you may notice the only thing that changed was <code>settings</code> definition and its
dependency with path to the file. That make it obvious we could define
application container by reusing our first definition with hardcoded settings.</p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">lru_cache</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dependencies</span> <span class="kn">import</span> <span class="n">this</span><span class="p">,</span> <span class="n">value</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">yaml</span> <span class="kn">import</span> <span class="n">safe_load</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Container3</span><span class="p">(</span><span class="n">Container1</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nd">@value</span>
<span class="gp">... </span>    <span class="nd">@lru_cache</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">settings</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">config</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">... </span>            <span class="k">return</span> <span class="n">safe_load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="n">config</span> <span class="o">=</span> <span class="s2">&quot;docs/config.yml&quot;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Container2</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="go">Connecting to 127.0.0.3:5432</span>
<span class="go">Connecting to 127.0.0.3:6379</span>
</code></pre></div>
<h3 id="reading-environment-variables">Reading environment variables<a class="headerlink" href="#reading-environment-variables" title="Permanent link">&para;</a></h3>
<p>Some deployment options makes it hard to create configuration files on the
target host system. <a href="https://www.heroku.com/">Heroku</a> advertise its
twelve-factor application approach heavily. Sometimes environment variables
would be an option. But consider it a security risk.</p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">environ</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dependencies</span> <span class="kn">import</span> <span class="n">Injector</span><span class="p">,</span> <span class="n">this</span><span class="p">,</span> <span class="n">value</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">application</span> <span class="kn">import</span> <span class="n">App</span><span class="p">,</span> <span class="n">PostgreSQL</span><span class="p">,</span> <span class="n">Redis</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Container</span><span class="p">(</span><span class="n">Injector</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">app</span> <span class="o">=</span> <span class="n">App</span>
<span class="gp">... </span>    <span class="n">database</span> <span class="o">=</span> <span class="n">this</span><span class="o">.</span><span class="n">Database</span><span class="o">.</span><span class="n">connection</span>
<span class="gp">... </span>    <span class="n">cache</span> <span class="o">=</span> <span class="n">this</span><span class="o">.</span><span class="n">Cache</span><span class="o">.</span><span class="n">connection</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">class</span> <span class="nc">Database</span><span class="p">(</span><span class="n">Injector</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">connection</span> <span class="o">=</span> <span class="n">PostgreSQL</span>
<span class="gp">... </span>        <span class="n">host</span> <span class="o">=</span> <span class="p">(</span><span class="n">this</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s2">&quot;postgresql&quot;</span><span class="p">][</span><span class="s2">&quot;host&quot;</span><span class="p">]</span>
<span class="gp">... </span>        <span class="n">port</span> <span class="o">=</span> <span class="p">(</span><span class="n">this</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s2">&quot;postgresql&quot;</span><span class="p">][</span><span class="s2">&quot;port&quot;</span><span class="p">]</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">class</span> <span class="nc">Cache</span><span class="p">(</span><span class="n">Injector</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">connection</span> <span class="o">=</span> <span class="n">Redis</span>
<span class="gp">... </span>        <span class="n">host</span> <span class="o">=</span> <span class="p">(</span><span class="n">this</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s2">&quot;redis&quot;</span><span class="p">][</span><span class="s2">&quot;host&quot;</span><span class="p">]</span>
<span class="gp">... </span>        <span class="n">port</span> <span class="o">=</span> <span class="p">(</span><span class="n">this</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s2">&quot;redis&quot;</span><span class="p">][</span><span class="s2">&quot;port&quot;</span><span class="p">]</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="nd">@value</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">settings</span><span class="p">():</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s2">&quot;postgresql&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>                <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="n">environ</span><span class="p">[</span><span class="s2">&quot;POSTGRESQL_HOST&quot;</span><span class="p">],</span>
<span class="gp">... </span>                <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="n">environ</span><span class="p">[</span><span class="s2">&quot;POSTGRESQL_PORT&quot;</span><span class="p">],</span>
<span class="gp">... </span>            <span class="p">},</span>
<span class="gp">... </span>            <span class="s2">&quot;redis&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>                <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="n">environ</span><span class="p">[</span><span class="s2">&quot;REDIS_HOST&quot;</span><span class="p">],</span>
<span class="gp">... </span>                <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="n">environ</span><span class="p">[</span><span class="s2">&quot;REDIS_PORT&quot;</span><span class="p">],</span>
<span class="gp">... </span>            <span class="p">},</span>
<span class="gp">... </span>        <span class="p">}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Container</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="go">Connecting to postgresql-instance1.cg034hpkmmjt.us-east-1.rds.amazonaws.com:5432</span>
<span class="go">Connecting to redis-01.7abc2d.0001.usw2.cache.amazonaws.com:6379</span>
</code></pre></div>
<h3 id="reading-settings-from-network">Reading settings from network<a class="headerlink" href="#reading-settings-from-network" title="Permanent link">&para;</a></h3>
<p>A best option for solid deployment setup would be some variant of service
discovery platform.</p>
<p>You could conside combination of HashiCorp
<a href="https://www.hashicorp.com/products/consul">Consul</a> and
<a href="https://www.hashicorp.com/products/vault">Vault</a> the editors choice.</p>
<p>We discover database and cache host using consul client. After that we request a
password for found service from vault. Optionaly, we could configure consul
client using environment variables. Let say we could change default port for
local consul agent.</p>
<div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">lru_cache</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">consul</span> <span class="kn">import</span> <span class="n">Consul</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dependencies</span> <span class="kn">import</span> <span class="n">Injector</span><span class="p">,</span> <span class="n">this</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">application</span> <span class="kn">import</span> <span class="n">App</span><span class="p">,</span> <span class="n">PostgreSQL</span><span class="p">,</span> <span class="n">Redis</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Container</span><span class="p">(</span><span class="n">Injector</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">app</span> <span class="o">=</span> <span class="n">App</span>
<span class="gp">... </span>    <span class="n">database</span> <span class="o">=</span> <span class="n">this</span><span class="o">.</span><span class="n">Database</span><span class="o">.</span><span class="n">connection</span>
<span class="gp">... </span>    <span class="n">cache</span> <span class="o">=</span> <span class="n">this</span><span class="o">.</span><span class="n">Cache</span><span class="o">.</span><span class="n">connection</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">class</span> <span class="nc">Database</span><span class="p">(</span><span class="n">Injector</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">connection</span> <span class="o">=</span> <span class="n">PostgreSQL</span>
<span class="gp">... </span>        <span class="n">host</span> <span class="o">=</span> <span class="p">(</span><span class="n">this</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s2">&quot;postgresql&quot;</span><span class="p">][</span><span class="s2">&quot;host&quot;</span><span class="p">]</span>
<span class="gp">... </span>        <span class="n">port</span> <span class="o">=</span> <span class="p">(</span><span class="n">this</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s2">&quot;postgresql&quot;</span><span class="p">][</span><span class="s2">&quot;port&quot;</span><span class="p">]</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">class</span> <span class="nc">Cache</span><span class="p">(</span><span class="n">Injector</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">connection</span> <span class="o">=</span> <span class="n">Redis</span>
<span class="gp">... </span>        <span class="n">host</span> <span class="o">=</span> <span class="p">(</span><span class="n">this</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s2">&quot;redis&quot;</span><span class="p">][</span><span class="s2">&quot;host&quot;</span><span class="p">]</span>
<span class="gp">... </span>        <span class="n">port</span> <span class="o">=</span> <span class="p">(</span><span class="n">this</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s2">&quot;redis&quot;</span><span class="p">][</span><span class="s2">&quot;port&quot;</span><span class="p">]</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="nd">@value</span>
<span class="gp">... </span>    <span class="nd">@lru_cache</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">settings</span><span class="p">(</span><span class="n">consul</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s2">&quot;postgresql&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>                <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="n">consul</span><span class="o">.</span><span class="n">kv</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;postgresql_host&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;Value&quot;</span><span class="p">],</span>
<span class="gp">... </span>                <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="n">consul</span><span class="o">.</span><span class="n">kv</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;postgresql_port&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;Value&quot;</span><span class="p">],</span>
<span class="gp">... </span>            <span class="p">},</span>
<span class="gp">... </span>            <span class="s2">&quot;redis&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>                <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="n">consul</span><span class="o">.</span><span class="n">kv</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;redis_host&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;Value&quot;</span><span class="p">],</span>
<span class="gp">... </span>                <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="n">consul</span><span class="o">.</span><span class="n">kv</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;redis_port&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;Value&quot;</span><span class="p">],</span>
<span class="gp">... </span>            <span class="p">},</span>
<span class="gp">... </span>        <span class="p">}</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="n">consul</span> <span class="o">=</span> <span class="n">Consul</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Container</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="go">Connecting to local consul agent</span>
<span class="go">Connecting to postgresql-instance1.cg034hpkmmjt.us-east-1.rds.amazonaws.com:5432</span>
<span class="go">Connecting to redis-01.7abc2d.0001.usw2.cache.amazonaws.com:6379</span>
</code></pre></div>
<p align="center">&mdash;  &mdash;</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../design/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Design" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Design
            </div>
          </div>
        </a>
      
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs"], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.8492ddcf.min.js"></script>
      
        <script src="../javascripts/extra.js"></script>
      
    
  </body>
</html>